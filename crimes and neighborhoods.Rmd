---
title: "crimes and neighborhoods"
output: html_document
---
The purpose of this document is to combine neighborhood data with crime data

##Load Packages
For our analysis, we will use the following packages for data wrangling and visualizations:
devtools for R package development
tidyverse for data wrangling and visualization
sf to convert coordinates into geometrical points
tidycensus to get Census data that is pre-prepared for exploration within the tidyverse
tmap to visualize spatial data distributions by creating geographical maps by variables
censusr to retrieve data frames of census data and metadata from U.S. Census Beureau
here to specify where files/data is in the computer relative to a particular file
janitor for examining and cleaning untidy data
lubridate package for handling dates

```{r}
library(devtools)
library(tidyverse)
library(sf)
library(tidycensus)
library(tmap)
library(censusr)
library(here)
library(janitor)
library(lubridate)
```

## Load data
The crime data comes from Open Data D.C. he data can be downloaded in .csv, .geojson and various other formats. The data is available at https://opendata.dc.gov/datasets/DCGIS::crime-incidents-in-2021/about. Also, load neighborhood data.
```{r}
data<- read_csv("Crime_Incidents_in_2021.csv") %>%
  clean_names() %>%
  st_as_sf(coords = c("longitude","latitude"), crs = 4326) #adds a column to the dataset for the geometry based off latitude and longitude

neigh <- sf::read_sf("https://raw.githubusercontent.com/jskufca/DS241_bikes_2021/main/data/raw/dc_neigh.geojson") %>% clean_names()


```

Join the data together. This dataframe can then be joined with datasets created by the other teams
```{r}
df1 <- st_join(data, neigh) #joins crime data and neighborhood data  into a single dataset. 
```


## Visualize Crimes By Neighborhood
The tmap code below has been set to view mode. Each neighborhood has been represented by a a different shade and been filled with the area. The black dots represents any crime that has happened in that particular area.
```{r}
tmap_mode("view")
tm_shape(neigh) + 
  tm_polygons("shapearea") +
tm_shape(data) + 
  tm_dots(col="offense", palette = "Set1", stretch.palette = FALSE, size = 0.02, shape = 2) +  
  tm_layout(legend.outside = TRUE) 
```

